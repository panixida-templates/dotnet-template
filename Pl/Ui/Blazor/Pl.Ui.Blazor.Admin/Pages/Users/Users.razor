@page "/users"

<MudStack Spacing="3">

    <MudText Typo="Typo.h5">Пользователи</MudText>

    <MudPaper Elevation="1" Outlined="true">
        <MudExpansionPanels Elevation="0">
            <MudExpansionPanel Text="Фильтры" Expanded="@_filtersExpanded" ExpandedChanged="OnFiltersExpandedChanged">
                <UsersFilters SearchParams="_searchParams" OnChanged="OnFiltersChanged" OnReset="ResetFilters" />
            </MudExpansionPanel>
        </MudExpansionPanels>
    </MudPaper>

    <MudPaper Elevation="1">
        <MudTable T="UserViewModel" @ref="_table" ServerData="LoadServerData" Hover="true" Bordered="true" Striped="true" Loading="_loading">
            <HeaderContent>
                <MudTh>
                    <MudTableSortLabel T="UserViewModel" SortLabel="@nameof(UserViewModel.Name)">
                        Имя
                    </MudTableSortLabel>
                </MudTh>
                <MudTh>
                    <MudTableSortLabel T="UserViewModel" SortLabel="@nameof(UserViewModel.Email)">
                        Email
                    </MudTableSortLabel>
                </MudTh>
                <MudTh>
                    <MudTableSortLabel T="UserViewModel" SortLabel="@nameof(UserViewModel.Role)">
                        Роль
                    </MudTableSortLabel>
                </MudTh>
                <MudTh>
                    <MudTableSortLabel T="UserViewModel" SortLabel="@nameof(UserViewModel.Phone)">
                        Телефон
                    </MudTableSortLabel>
                </MudTh>
                <MudTh>
                    <MudTableSortLabel T="UserViewModel" SortLabel="@nameof(UserViewModel.Age)">
                        Возраст
                    </MudTableSortLabel>
                </MudTh>
                <MudTh>
                    <MudTableSortLabel T="UserViewModel" SortLabel="@nameof(UserViewModel.Birthday)">
                        День рождения
                    </MudTableSortLabel>
                </MudTh>
            </HeaderContent>

            <RowTemplate>
                <MudTd DataLabel="Имя">@context.Name</MudTd>
                <MudTd DataLabel="Email">@context.Email</MudTd>
                <MudTd DataLabel="Роль">
                    <MudChip T="string" Size="Size.Small" Variant="Variant.Outlined">
                        @context.Role.GetDisplayName()
                    </MudChip>
                </MudTd>
                <MudTd DataLabel="Телефон">@context.Phone</MudTd>
                <MudTd DataLabel="Возраст">@context.Age</MudTd>
                <MudTd DataLabel="День рождения">@context.Birthday.ToString()</MudTd>
            </RowTemplate>

            <PagerContent>
                <MudTablePager PageSizeOptions="new[] { 10, 20, 50 }" />
            </PagerContent>

            <NoRecordsContent>
                <MudText Color="Color.Secondary">
                    Ничего не найдено
                </MudText>
            </NoRecordsContent>

        </MudTable>
    </MudPaper>

</MudStack>
