@page "/users"
@inherits BaseFilterableTable<int, UserViewModel, UsersSearchParams, UsersConvertParams, IUsersService>

<MudStack Spacing="3">

    <MudText Typo="Typo.h5" Align="Align.Center">Пользователи </MudText>

    <ActionsPanel>
        <MudItem>
            <MudButton Variant="Variant.Outlined" Color="Color.Primary" StartIcon="@Icons.Material.Filled.Add" Size="Size.Small">
                Добавить
            </MudButton>
        </MudItem>
    </ActionsPanel>

    <FiltersPanel Title="Фильтры" Expanded="@_filtersExpanded" ExpandedChanged="OnFiltersExpandedChanged" OnReset="ResetFilters">
        <UsersFilters SearchParams="_searchParams" OnChanged="OnFiltersChanged" />
    </FiltersPanel>

    <MudPaper Elevation="1">
        <MudTable T="UserViewModel" @ref="_table" ServerData="LoadServerData" Hover="true" Bordered="true" Striped="true" Loading="_loading">
            <HeaderContent>
                <MudTh>
                    <MudTableSortLabel T="UserViewModel" SortLabel="@nameof(UserViewModel.Name)">
                        Имя
                    </MudTableSortLabel>
                </MudTh>
                <MudTh>
                    <MudTableSortLabel T="UserViewModel" SortLabel="@nameof(UserViewModel.Email)">
                        Email
                    </MudTableSortLabel>
                </MudTh>
                <MudTh>
                    <MudTableSortLabel T="UserViewModel" SortLabel="@nameof(UserViewModel.Role)">
                        Роль
                    </MudTableSortLabel>
                </MudTh>
                <MudTh>
                    <MudTableSortLabel T="UserViewModel" SortLabel="@nameof(UserViewModel.Phone)">
                        Телефон
                    </MudTableSortLabel>
                </MudTh>
                <MudTh>
                    <MudTableSortLabel T="UserViewModel" SortLabel="@nameof(UserViewModel.Age)">
                        Возраст
                    </MudTableSortLabel>
                </MudTh>
                <MudTh>
                    <MudTableSortLabel T="UserViewModel" SortLabel="@nameof(UserViewModel.Birthday)">
                        День рождения
                    </MudTableSortLabel>
                </MudTh>
            </HeaderContent>

            <RowTemplate>
                <MudTd DataLabel="Имя">@context.Name</MudTd>
                <MudTd DataLabel="Email">@context.Email</MudTd>
                <MudTd DataLabel="Роль">
                    <MudChip T="string" Size="Size.Small" Variant="Variant.Outlined">
                        @context.Role.GetDisplayName()
                    </MudChip>
                </MudTd>
                <MudTd DataLabel="Телефон">@context.Phone</MudTd>
                <MudTd DataLabel="Возраст">@context.Age</MudTd>
                <MudTd DataLabel="День рождения">@context.Birthday.ToString()</MudTd>
            </RowTemplate>

            <PagerContent>
                <MudTablePager PageSizeOptions="GetPageSizeOptions()" />
            </PagerContent>

            <NoRecordsContent>
                <TableNoRecordsContent />
            </NoRecordsContent>

        </MudTable>
    </MudPaper>

</MudStack>
